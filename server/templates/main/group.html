{% extends '../base2.html' %} {% load static %}
{%block page%}
<main class="group-main">
    <div class="group-header">
        <h1>{{group.name}}</h1>
        {% if am_I_creator %}
        <form onsubmit="confirmModal(event)">
            {% csrf_token %}
            <input type="text" name="group-create-inpput"  id="update-input" value="{{group.name}}">
            <button type="submit" name="group-update-button" id="update-button"><i class="fa-solid fa-check"></i></button>
        </form>
        <button id="groupName-editBtn"><i class="fa-solid fa-pen"></i></button>
        {% endif %}


        
    </div>
    <div class="group-content">
        <div class="group-content__info">
            <span class="group-content__text">Group Value: {{group.price}} ₩</span>
            <div class="bar"></div>
            <span class="group-content__text">Today's Earnings: {{group.delta}} ₩</span>
            <div class="bar"></div>
            <span class="group-content__text" id="group-member">Members: {{users_length}}</span>
            <div class="bar"></div>
            <span class="group-content__text">Group Head: {{group.create_user}}</span>
            
        </div>
       
        <h3><i class="fa-solid fa-crown"></i> Members Ranking</h3>
        <ul class="group-content__ul">
            {% for key, value in value.items %}
            <li id="group-content__li-{{key}}" class="group-user">
                {% if forloop.counter < 4 %}
                <div class="members-top3-trophy">
                    {% if forloop.counter == 1 %} 
                    <i class="fa-solid fa-trophy" style="color: yellow;"></i>
                    {% elif forloop.counter == 2 %} 
                    <i class="fa-solid fa-trophy" style="color: silver;"></i>
                    {% elif forloop.counter == 3 %} 
                    <i class="fa-solid fa-trophy" style="color: #CD7F32;"></i>
                    {% endif %}
                </div>
                {% endif %}

                <div class="group-user__username">{{ key }}</div>
                <div class="group-user__value"><i class="fa-solid fa-coins"></i> {{ value }}</div>
            </li>
            {% endfor %}
        </ul>
        <form onsubmit="handleButtonClickMessage(event)">
            {% csrf_token %}
            <input type="hidden" name="group" id="group-content__name" value="{{ group.name }}">
            {% if button_text == '탈퇴' %}
            <!-- <button type="submit" name="group-button" id="add-button">{{button_text}}</button> -->
            <button type="submit" name="group-button" id="add-button" class="leaveGroupBtn">탈퇴</button>
            {% else %}
            <button type="submit" name="group-button" id="add-button" class="joinGroupBtn">가입</button>
            {% endif %}
        </form>
        {% if am_I_creator %}
        <form action="/main/group/delete_group/{{ group.pk }}/" method="post" onsubmit="confirmDelete()">
            {% csrf_token %}
            <button type="submit" name="group-delete-button" id="delete-button">그룹 삭제</button>
        </form>
        {% endif %}
    </div>


   
</main>



{% endblock %}


{% block extra %}

<script src="{% static 'js/group.js' %}"></script>

{% endblock %}