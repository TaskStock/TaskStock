{% extends '../base.html' %} {% load static %}
{%block content%}
<main class="search-main">
    <div class="search-container">
        <div class="search-form-container">
            <form action="/main/search/" class="search-form" method="GET">
                <input type="text" placeholder="Search" name="search_content" id="search_content">
                <button type="submit">
                    <i class="gg-search"></i>
                </button>
            </form>
        </div>
        <div class="live-chart">
            <div class="search-label">
                <h3>실시간 차트</h3>
            </div>
            <div class="search-result Scroll">
                {% for user in users %}
                <a href="/">
                    <div class="search-result__container">
                        <div class="search-result__right--container">
                            <img src="https://placekitten.com/50/50" alt="user image">
                            <div class="search-result__name-container">
                                <h2>{{user.name}}</h2>
                                <p>Hi</p>
                            </div>
                        </div>
                        <div class="search-result__right-container">
                            <div class="search-result__info">
                                <div class="search-result__right-upper-container">
                                    <img src="https://placekitten.com/30/30" alt="">
                                </div>
                                <p>13%</p>
                            </div>
                            <div class="search-result__info">
                                <div class="search-result__right-upper-container">
                                    <h2>23</h2>
                                </div>
                                <p>following</p>
                            </div>
                            <div class="search-result__info">
                                <div class="search-result__right-upper-container">
                                    <h2>23</h2>
                                </div>
                                <p>follower</p>
                            </div>
                        </div>    
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
        <div class="search-users">
            <div class="search-label">
                <h3>검색 결과</h3>
            </div>
            <div class="search-result Scroll" id="search-users__result-container">
                {% for filtered_user in filtered_users %}
                <a href="/">
                    <div class="search-result__container">
                        <div class="search-result__right--container">
                            <img src="https://placekitten.com/50/50" alt="user image">
                            <div class="search-result__name-container">
                                <h2>{{filtered_user.name}}</h2>
                                <p>Hi</p>
                            </div>
                        </div>
                        <div class="search-result__right-container">
                            <div class="search-result__info">
                                <div class="search-result__right-upper-container">
                                    <img src="https://placekitten.com/30/30" alt="">
                                </div>
                                <p>13%</p>
                            </div>
                            <div class="search-result__info">
                                <div class="search-result__right-upper-container">
                                    <h2>23</h2>
                                </div>
                                <p>following</p>
                            </div>
                            <div class="search-result__info">
                                <div class="search-result__right-upper-container">
                                    <h2>23</h2>
                                </div>
                                <p>follower</p>
                            </div>
                        </div>    
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
    </div>
</main>
{% endblock %}

{% block extra %}
<script>
    // 검색 창에 입력할 때마다 ajax로 유저 목록
    // document.addEventListener("DOMContentLoaded", function(){
    //     const textarea = document.querySelector("#search_content");

    //     textarea.addEventListener("input", function () {
            
    //     });
    // });
    
    // const introduceUpdate = async (event) =>{
    // event.preventDefault();

    // const formData = new FormData(event.target);
    // const introduceArea = document.querySelector('#proflie-description');
    // formData.append('proflie-description', introduceArea.value);

    // const url = "/main/settings/update_introduce/";
    // const res = await fetch(url, {
    //     method:"POST",
    //     headers:{},
    //     body: formData,
    // });
    // const {result: result} = await res.json();
    
    // }
</script>
{% endblock %}